{"version":3,"file":"reactblockui.es.js","sources":["../src/Loader.js","../src/BlockUi.js"],"sourcesContent":["import React from 'react';\n\nfunction Loader() {\n  return (\n    <div className=\"loading-indicator\">\n      <span className=\"loading-bullet\">&bull;</span>{' '}\n      <span className=\"loading-bullet\">&bull;</span>{' '}\n      <span className=\"loading-bullet\">&bull;</span>\n    </div>\n  );\n}\n\nexport default Loader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DefaultLoader from './Loader';\n\nconst propTypes = {\n  blocking: PropTypes.bool,\n  children: PropTypes.node,\n  renderChildren: PropTypes.bool,\n  className: PropTypes.string,\n  message: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.node,\n  ]),\n  loader: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    PropTypes.node,\n  ]),\n  tag: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n  ]),\n};\n\nconst defaultProps = {\n  tag: 'div',\n  renderChildren: true,\n  loader: DefaultLoader,\n};\n\nclass BlockUi extends Component {\n  constructor(props) {\n    super(props);\n\n    this.tabbedUpTop = this.tabbedUpTop.bind(this);\n    this.tabbedDownTop = this.tabbedDownTop.bind(this);\n    this.tabbedUpBottom = this.tabbedUpBottom.bind(this);\n    this.tabbedDownBottom = this.tabbedDownBottom.bind(this);\n  }\n\n  blockingTab(e, withShift = false) {\n    return this.props.blocking && (e.key === 'Tab' || e.keyCode === 9) && e.shiftKey == withShift;\n  }\n\n  tabbedUpTop(e) {\n    if (this.blockingTab(e)) {\n      this.blocker.focus();\n    }\n  }\n\n  tabbedDownTop(e) {\n    if (this.blockingTab(e)) {\n      e.preventDefault();\n      this.blocker.focus();\n    }\n  }\n\n  tabbedUpBottom(e) {\n    if (this.blockingTab(e, true)) {\n      this.topFocus.focus();\n    }\n  }\n\n  tabbedDownBottom(e) {\n    if (this.blockingTab(e, true)) {\n      e.preventDefault();\n      this.topFocus.focus();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.blocking !== this.props.blocking) {\n      if (nextProps.blocking) {\n        // blocking started\n        if (this.helper && this.helper.parentNode && this.helper.parentNode.contains\n          && this.helper.parentNode.contains(document.activeElement)) {\n          this.focused = document.activeElement;\n          // https://www.tjvantoll.com/2013/08/30/bugs-with-document-activeelement-in-internet-explorer/#blurring-the-body-switches-windows-in-ie9-and-ie10\n          if (this.focused && this.focused !== document.body) {\n            setTimeout(() => this.topFocus && this.topFocus.focus(), 0);\n          }\n        }\n      } else {\n        const ae = document.activeElement;\n        if (this.focused && (!ae || ae === document.body || ae === this.topFocus)) {\n          this.focused.focus();\n          this.focused = null;\n        }\n      }\n    }\n  }\n\n  render() {\n    const {\n      tag: Tag,\n      blocking,\n      className,\n      children,\n      message,\n      loader: Loader,\n      renderChildren,\n      ...attributes\n    } = this.props;\n\n    const classes = blocking ? `block-ui ${className}` : className;\n    const renderChilds = !blocking || renderChildren;\n\n    return (\n      <Tag {...attributes} className={classes} aria-busy={blocking}>\n        {blocking &&\n        <div tabIndex=\"0\" onKeyUp={this.tabbedUpTop} onKeyDown={this.tabbedDownTop} ref={c => this.topFocus = c} />}\n        {renderChilds && children}\n        {blocking &&\n        <div className=\"block-ui-container\"\n          tabIndex=\"0\"\n          ref={c => this.blocker = c}\n          onKeyUp={this.tabbedUpBottom}\n          onKeyDown={this.tabbedDownBottom}\n        >\n          <div className=\"block-ui-overlay\" />\n          <div className=\"block-ui-message-container\">\n            <div className=\"block-ui-message\">\n              {message}\n              {React.isValidElement(Loader) ? Loader : <Loader />}\n            </div>\n          </div>\n        </div>\n        }\n        <span ref={c => this.helper = c} />\n      </Tag>\n    );\n  }\n}\n\nBlockUi.propTypes = propTypes;\nBlockUi.defaultProps = defaultProps;\n\nexport default BlockUi;\n"],"names":["Loader","propTypes","PropTypes","bool","node","string","oneOfType","func","defaultProps","DefaultLoader","BlockUi","props","tabbedUpTop","bind","tabbedDownTop","tabbedUpBottom","tabbedDownBottom","e","withShift","blocking","key","keyCode","shiftKey","blockingTab","blocker","focus","preventDefault","topFocus","nextProps","helper","parentNode","contains","document","activeElement","focused","body","ae","Tag","tag","className","children","message","loader","renderChildren","attributes","classes","renderChilds","c","isValidElement","Component"],"mappings":"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"}