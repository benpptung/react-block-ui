{"version":3,"file":"reactblockui.es.js","sources":["../src/Loader.js","../src/BlockUi.js"],"sourcesContent":["import React from 'react';\n\nfunction Loader() {\n  return (\n    <div className=\"loading-indicator\">\n      <span className=\"loading-bullet\">&bull;</span>{' '}\n      <span className=\"loading-bullet\">&bull;</span>{' '}\n      <span className=\"loading-bullet\">&bull;</span>\n    </div>\n  );\n}\n\nexport default Loader;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DefaultLoader from './Loader';\n\nconst propTypes = {\n  blocking: PropTypes.bool,\n  children: PropTypes.node,\n  renderChildren: PropTypes.bool,\n  className: PropTypes.string,\n  message: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.node,\n  ]),\n  loader: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    PropTypes.node,\n  ]),\n  tag: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n  ]),\n};\n\nconst defaultProps = {\n  tag: 'div',\n  renderChildren: true,\n  loader: DefaultLoader,\n};\n\nclass BlockUi extends Component {\n  constructor(props) {\n    super(props);\n\n    this.tabbedUpTop = this.tabbedUpTop.bind(this);\n    this.tabbedDownTop = this.tabbedDownTop.bind(this);\n    this.tabbedUpBottom = this.tabbedUpBottom.bind(this);\n    this.tabbedDownBottom = this.tabbedDownBottom.bind(this);\n\n    this.catchTopFocus = c=> this.topFocus = c;\n    this.catchBlocker = c=> this.blocker = c;\n    this.catchHelper = c=> this.helper = c;\n\n  }\n\n  blockingTab(e, withShift = false) {\n    return this.props.blocking && (e.key === 'Tab' || e.keyCode === 9) && e.shiftKey == withShift;\n  }\n\n  tabbedUpTop(e) {\n    if (this.blockingTab(e)) {\n      this.blocker.focus();\n    }\n  }\n\n  tabbedDownTop(e) {\n    if (this.blockingTab(e)) {\n      e.preventDefault();\n      this.blocker.focus();\n    }\n  }\n\n  tabbedUpBottom(e) {\n    if (this.blockingTab(e, true)) {\n      this.topFocus.focus();\n    }\n  }\n\n  tabbedDownBottom(e) {\n    if (this.blockingTab(e, true)) {\n      e.preventDefault();\n      this.topFocus.focus();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.blocking !== this.props.blocking) {\n      if (nextProps.blocking) {\n        // blocking started\n        if (this.helper && this.helper.parentNode && this.helper.parentNode.contains\n          && this.helper.parentNode.contains(document.activeElement)) {\n          this.focused = document.activeElement;\n          // https://www.tjvantoll.com/2013/08/30/bugs-with-document-activeelement-in-internet-explorer/#blurring-the-body-switches-windows-in-ie9-and-ie10\n          if (this.focused && this.focused !== document.body) {\n            setTimeout(() => this.topFocus && this.topFocus.focus(), 0);\n          }\n        }\n      } else {\n        const ae = document.activeElement;\n        if (this.focused && (!ae || ae === document.body || ae === this.topFocus)) {\n          this.focused.focus();\n          this.focused = null;\n        }\n      }\n    }\n  }\n\n  render() {\n    const {\n      tag: Tag,\n      blocking,\n      className,\n      children,\n      message,\n      loader: Loader,\n      renderChildren,\n      ...attributes\n    } = this.props;\n\n    const classes = blocking ? `block-ui ${className}` : className;\n    const renderChilds = !blocking || renderChildren;\n\n    return (\n      <Tag {...attributes} className={classes} aria-busy={blocking}>\n        {blocking &&\n        <div tabIndex=\"0\" onKeyUp={this.tabbedUpTop} onKeyDown={this.tabbedDownTop} ref={this.catchTopFocus} />}\n        {renderChilds && children}\n        {blocking &&\n        <div className=\"block-ui-container\"\n          tabIndex=\"0\"\n          ref={this.catchBlocker}\n          onKeyUp={this.tabbedUpBottom}\n          onKeyDown={this.tabbedDownBottom}\n        >\n          <div className=\"block-ui-overlay\" />\n          <div className=\"block-ui-message-container\">\n            <div className=\"block-ui-message\">\n              {message}\n              {React.isValidElement(Loader) ? Loader : <Loader />}\n            </div>\n          </div>\n        </div>\n        }\n        <span ref={this.catchHelper} />\n      </Tag>\n    );\n  }\n}\n\nBlockUi.propTypes = propTypes;\nBlockUi.defaultProps = defaultProps;\n\nexport default BlockUi;\n"],"names":["Loader","propTypes","PropTypes","bool","node","string","oneOfType","func","defaultProps","DefaultLoader","BlockUi","props","tabbedUpTop","bind","tabbedDownTop","tabbedUpBottom","tabbedDownBottom","catchTopFocus","topFocus","c","catchBlocker","blocker","catchHelper","helper","e","withShift","blocking","key","keyCode","shiftKey","blockingTab","focus","preventDefault","nextProps","parentNode","contains","document","activeElement","focused","body","ae","Tag","tag","className","children","message","loader","renderChildren","attributes","classes","renderChilds","isValidElement","Component"],"mappings":"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"}